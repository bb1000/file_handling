<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <style type="text/css">
      @import url(http://fonts.googleapis.com/css?family=Droid+Serif);
      @import url(http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(http://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body {
        font-family: 'Droid Serif';
      }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: 400;
        margin-bottom: 0;
      }
      .remark-slide-content h1 { font-size: 3em; }
      .remark-slide-content h2 { font-size: 2em; }
      .remark-slide-content h3 { font-size: 1.6em; }
      .footnote {
        position: absolute;
        bottom: 3em;
      }
      li p { line-height: 1.25em; }
      .red { color: #fa0000; }
      .large { font-size: 2em; }
      a, a > code {
        color: rgb(249, 38, 114);
        text-decoration: none;
      }
      code {
        -moz-border-radius: 5px;
        -web-border-radius: 5px;
        background: #e7e8e2;
        border-radius: 5px;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
      .remark-code-line-highlighted     { background-color: #373832; }
      .pull-left {
        float: left;
        width: 47%;
      }
      .pull-right {
        float: right;
        width: 47%;
      }
      .pull-right ~ p {
        clear: both;
      }
      #slideshow .slide .content code {
        font-size: 0.8em;
      }
      #slideshow .slide .content pre code {
        font-size: 0.9em;
        padding: 15px;
      }
      .inverse {
        background: #272822;
        color: #777872;
        text-shadow: 0 0 20px #333;
      }
      .inverse h1, .inverse h2 {
        color: #f3f3f3;
        line-height: 0.8em;
      }

      /* Slide-specific styling */
      #slide-inverse .footnote {
        bottom: 12px;
        left: 20px;
      }
      #slide-how .slides {
        font-size: 0.9em;
        position: absolute;
        top:  151px;
        right: 140px;
      }
      #slide-how .slides h3 {
        margin-top: 0.2em;
      }
      #slide-how .slides .first, #slide-how .slides .second {
        padding: 1px 20px;
        height: 90px;
        width: 120px;
        -moz-box-shadow: 0 0 10px #777;
        -webkit-box-shadow: 0 0 10px #777;
        box-shadow: 0 0 10px #777;
      }
      #slide-how .slides .first {
        background: #fff;
        position: absolute;
        top: 20%;
        left: 20%;
        z-index: 1;
      }
      #slide-how .slides .second {
        position: relative;
        background: #fff;
        z-index: 0;
      }

      /* Two-column layout */
      .left-column {
        color: #777;
        width: 20%;
        height: 92%;
        float: left;
      }
        .left-column h2:last-of-type, .left-column h3:last-child {
          color: #000;
        }
      .right-column {
        width: 75%;
        float: right;
        padding-top: 1em;
      }
    </style>
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

  </head>
  <body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script src="/file_handling/refreeze/js/springy.js"></script>
    <script src="/file_handling/refreeze/js/springyui.js"></script>
    <script>
        
    </script>
    <textarea id="source">
name: inverse
layout: true
class: center, middle, inverse

---

&lt;script type=&#34;text/javascript&#34;
  src=&#34;https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&#34;&gt;
&lt;/script&gt;
# File handling

## 

BB1000 Programming in Python

KTH

---

layout: false

## Learning objectives

+ File operations: open, close, read, write, etc.

+ Handling of input and output

+ Usage of string, list, dictionary, etc.

---

## String, list, dictionary...

Initialize an empty string/list/dictionary

```python
mystring = &#34;&#34;

mylist = []

mydictionary = {}
```

---

## String, list, dictionary...

Initialize an empty string/list/dictionary

```python
mystring = &#34;&#34;

mylist = []

mydictionary = {}
```

Check if a string is empty

+ Straightforward way

```python
if len(mystring) &gt; 0:
    print(&#34;This string is not empty.&#34;)
else:
    print(&#34;This string is empty.&#34;)
```

---

## String, list, dictionary...

Initialize an empty string/list/dictionary

```python
mystring = &#34;&#34;

mylist = []

mydictionary = {}
```

Check if a string is empty

+ Straightforward way

```python
if len(mystring) &gt; 0:
    print(&#34;This string is not empty.&#34;)
else:
    print(&#34;This string is empty.&#34;)
```

+ Pythonic way

```python
if mystring:
    print(&#34;This string is not empty.&#34;)
else:
    print(&#34;This string is empty.&#34;)
```

---

## String, list, dictionary...

Check if a list is empty

```python
if mylist:
    print(&#34;This list is not empty.&#34;)
else:
    print(&#34;This list is empty.&#34;)
```

---

## String, list, dictionary...

Check if a list is empty

```python
if mylist:
    print(&#34;This list is not empty.&#34;)
else:
    print(&#34;This list is empty.&#34;)
```

Check if a dictionary is empty

```python
if mydictionary:
    print(&#34;This dictionary is not empty.&#34;)
else:
    print(&#34;This dictionary is empty.&#34;)
```

https://docs.python.org/2/library/stdtypes.html#truth-value-testing

---

## Accessing elements ...

+ Characters in a string:

```python
mystring = &#34;Tack!&#34;

for c in mystring:
    print(c)
```

---

## Accessing elements ...

+ Characters in a string:

```python
mystring = &#34;Tack!&#34;

for c in mystring:
    print(c)
```

&lt;pre&gt;
T
a
c
k
!
&lt;/pre&gt;

---

## Accessing elements ...

+ Characters in a string:

```python
mystring = &#34;Tack!&#34;

for c in mystring:
    print(c)
```

&lt;pre&gt;
T
a
c
k
!
&lt;/pre&gt;

+ If you want to print in one line:

```python
mystring = &#34;Tack!&#34;

for c in mystring:
    print(c, end=&#34; &#34;)
```

---

## Accessing elements ...

+ Characters in a string:

```python
mystring = &#34;Tack!&#34;

for c in mystring:
    print(c)
```

&lt;pre&gt;
T
a
c
k
!
&lt;/pre&gt;

+ If you want to print in one line:

```python
mystring = &#34;Tack!&#34;

for c in mystring:
    print(c, end=&#34; &#34;)
```

&lt;pre&gt;
T a c k ! 
&lt;/pre&gt;

---

## Accessing elements ...

+ Elements in a list:

```python
mylist = [&#34;apple&#34;, &#34;pear&#34;, &#34;banana&#34;]

for element in mylist:
    print(element)
```

---

## Accessing elements ...

+ Elements in a list:

```python
mylist = [&#34;apple&#34;, &#34;pear&#34;, &#34;banana&#34;]

for element in mylist:
    print(element)
```

&lt;pre&gt;
apple
pear
banana
&lt;/pre&gt;

---

## Accessing elements ...

+ Elements in a list:

```python
mylist = [&#34;apple&#34;, &#34;pear&#34;, &#34;banana&#34;]

for element in mylist:
    print(element)
```

&lt;pre&gt;
apple
pear
banana
&lt;/pre&gt;

+ Keys in a dictionary:

```python
mydictionary = {&#34;A&#34;: &#34;adenine&#34;, &#34;C&#34;: &#34;cytosine&#34;, &#34;G&#34;: &#34;guanine&#34;, &#34;T&#34;: &#34;thymine&#34;}

for key in mydictionary:
    print(key)
```

---

## Accessing elements ...

+ Elements in a list:

```python
mylist = [&#34;apple&#34;, &#34;pear&#34;, &#34;banana&#34;]

for element in mylist:
    print(element)
```

&lt;pre&gt;
apple
pear
banana
&lt;/pre&gt;

+ Keys in a dictionary:

```python
mydictionary = {&#34;A&#34;: &#34;adenine&#34;, &#34;C&#34;: &#34;cytosine&#34;, &#34;G&#34;: &#34;guanine&#34;, &#34;T&#34;: &#34;thymine&#34;}

for key in mydictionary:
    print(key)
```

&lt;pre&gt;
A
C
G
T
&lt;/pre&gt;

---

## Accessing elements ...

+ If you want to access both the index and the element

```python
mylist = [&#34;apple&#34;, &#34;banana&#34;, &#34;cherry&#34;]

for index, element in enumerate(mylist):
    print(&#34;The element with index {} is {}&#34;.format(index, element))
```

---

## Accessing elements ...

+ If you want to access both the index and the element

```python
mylist = [&#34;apple&#34;, &#34;banana&#34;, &#34;cherry&#34;]

for index, element in enumerate(mylist):
    print(&#34;The element with index {} is {}&#34;.format(index, element))
```

&lt;pre&gt;
The element with index 0 is apple
The element with index 1 is banana
The element with index 2 is cherry
&lt;/pre&gt;

---

## Accessing elements ...

+ If you want to access both the index and the element

```python
mylist = [&#34;apple&#34;, &#34;banana&#34;, &#34;cherry&#34;]

for index, element in enumerate(mylist):
    print(&#34;The element with index {} is {}&#34;.format(index, element))
```

&lt;pre&gt;
The element with index 0 is apple
The element with index 1 is banana
The element with index 2 is cherry
&lt;/pre&gt;

+ If you want to access two lists at the same time

```python
names = [&#34;Alice&#34;, &#34;Bob&#34;, &#34;Carol&#34;]
fruits = [&#34;apple&#34;, &#34;banana&#34;, &#34;cherry&#34;]

for name, fruit in zip(names, fruits):
    print(&#34;{} likes {}&#34;.format(name, fruit))
```

---

## Accessing elements ...

+ If you want to access both the index and the element

```python
mylist = [&#34;apple&#34;, &#34;banana&#34;, &#34;cherry&#34;]

for index, element in enumerate(mylist):
    print(&#34;The element with index {} is {}&#34;.format(index, element))
```

&lt;pre&gt;
The element with index 0 is apple
The element with index 1 is banana
The element with index 2 is cherry
&lt;/pre&gt;

+ If you want to access two lists at the same time

```python
names = [&#34;Alice&#34;, &#34;Bob&#34;, &#34;Carol&#34;]
fruits = [&#34;apple&#34;, &#34;banana&#34;, &#34;cherry&#34;]

for name, fruit in zip(names, fruits):
    print(&#34;{} likes {}&#34;.format(name, fruit))
```

&lt;pre&gt;
Alice likes apple
Bob likes banana
Carol likes cherry
&lt;/pre&gt;

---

## Slicing sequences

If you want to access a subset of the sequence (e.g. a substring)

```python
mystring = &#34;ATATCGCGATCG&#34;

print(mystring[:4], mystring[4:8], mystring[8:])
```

---

## Slicing sequences

If you want to access a subset of the sequence (e.g. a substring)

```python
mystring = &#34;ATATCGCGATCG&#34;

print(mystring[:4], mystring[4:8], mystring[8:])
```

&lt;pre&gt;
ATAT CGCG ATCG
&lt;/pre&gt;

---

## Slicing sequences

If you want to access a subset of the sequence (e.g. a substring)

```python
mystring = &#34;ATATCGCGATCG&#34;

print(mystring[:4], mystring[4:8], mystring[8:])
```

&lt;pre&gt;
ATAT CGCG ATCG
&lt;/pre&gt;

```python
mystring = &#34;ATATCGCGATCG&#34;

print(mystring[:4:2], mystring[4:8:2], mystring[8::2])
```

---

## Slicing sequences

If you want to access a subset of the sequence (e.g. a substring)

```python
mystring = &#34;ATATCGCGATCG&#34;

print(mystring[:4], mystring[4:8], mystring[8:])
```

&lt;pre&gt;
ATAT CGCG ATCG
&lt;/pre&gt;

```python
mystring = &#34;ATATCGCGATCG&#34;

print(mystring[:4:2], mystring[4:8:2], mystring[8::2])
```

&lt;pre&gt;
AA CC AC
&lt;/pre&gt;

---

## Slicing sequences

If you want to access a subset of the sequence (e.g. a substring)

```python
mystring = &#34;ATATCGCGATCG&#34;

print(mystring[:4], mystring[4:8], mystring[8:])
```

&lt;pre&gt;
ATAT CGCG ATCG
&lt;/pre&gt;

```python
mystring = &#34;ATATCGCGATCG&#34;

print(mystring[:4:2], mystring[4:8:2], mystring[8::2])
```

&lt;pre&gt;
AA CC AC
&lt;/pre&gt;

```python
mystring = &#34;ATATCGCGATCG&#34;

print([::-1])
```

---

## Slicing sequences

If you want to access a subset of the sequence (e.g. a substring)

```python
mystring = &#34;ATATCGCGATCG&#34;

print(mystring[:4], mystring[4:8], mystring[8:])
```

&lt;pre&gt;
ATAT CGCG ATCG
&lt;/pre&gt;

```python
mystring = &#34;ATATCGCGATCG&#34;

print(mystring[:4:2], mystring[4:8:2], mystring[8::2])
```

&lt;pre&gt;
AA CC AC
&lt;/pre&gt;

```python
mystring = &#34;ATATCGCGATCG&#34;

print([::-1])
```

&lt;pre&gt;
GCTAGCGCTATA
&lt;/pre&gt;

---

## String formatting

+ Old style

```python
import math

print(&#34;The value of pi is approximately %f&#34; % math.pi)
```

&lt;pre&gt;
The value of pi is approximately 3.141593
&lt;/pre&gt;

---

## String formatting

+ Old style

```python
import math

print(&#34;The value of pi is approximately %f&#34; % math.pi)
```

&lt;pre&gt;
The value of pi is approximately 3.141593
&lt;/pre&gt;

```python
import math

print(&#34;The value of pi is approximately %.8f&#34; % math.pi)
print(&#34;The value of pi is approximately %20.12f&#34; % math.pi)
```

&lt;pre&gt;
The value of pi is approximately 3.14159265
The value of pi is approximately       3.141592653590
&lt;/pre&gt;

---

## String formatting

+ The `format` method

```python
import math

print(&#34;The value of pi is approximately {}&#34;.format(str(math.pi)))
print(&#34;The value of pi is approximately {}&#34;.format(math.pi))

print(&#34;The value of pi is approximately {:f}&#34;.format(math.pi))
print(&#34;The value of pi is approximately {:.8f}&#34;.format(math.pi))
print(&#34;The value of pi is approximately {:20.12f}&#34;.format(math.pi))
```

---

## String formatting

+ The `format` method

```python
import math

print(&#34;The value of pi is approximately {}&#34;.format(str(math.pi)))
print(&#34;The value of pi is approximately {}&#34;.format(math.pi))

print(&#34;The value of pi is approximately {:f}&#34;.format(math.pi))
print(&#34;The value of pi is approximately {:.8f}&#34;.format(math.pi))
print(&#34;The value of pi is approximately {:20.12f}&#34;.format(math.pi))
```

&lt;pre&gt;
The value of pi is approximately 3.141592653589793
The value of pi is approximately 3.141592653589793
The value of pi is approximately 3.141593
The value of pi is approximately 3.14159265
The value of pi is approximately       3.141592653590
&lt;/pre&gt;

---

## String formatting

+ The formatted string literals (f-string, new in Python 3.6)

```python
import math

print(f&#34;The value of pi is approximately {math.pi}&#34;)
print(f&#34;The value of pi is approximately {math.pi:.8f}&#34;)
print(f&#34;The value of pi is approximately {math.pi:20.12f}&#34;)
```

---

## String formatting

+ The formatted string literals (f-string, new in Python 3.6)

```python
import math

print(f&#34;The value of pi is approximately {math.pi}&#34;)
print(f&#34;The value of pi is approximately {math.pi:.8f}&#34;)
print(f&#34;The value of pi is approximately {math.pi:20.12f}&#34;)
```

&lt;pre&gt;
The value of pi is approximately 3.141592653589793
The value of pi is approximately 3.14159265
The value of pi is approximately       3.141592653590
&lt;/pre&gt;

https://docs.python.org/3/tutorial/inputoutput.html

---

## What we learned so far

+ How to initialize an empty string/list/dictionary

+ How to check if a string/tuple/list/dictionary is empty

+ How to use `for` loop to access the elements

+ How to use `enumerate` and `zip`

+ How to slice a sequence using `[start:stop:step]`

+ How to format a string

---

## Opening file

The built-in `open` function

+ `open` accepts a file name and a mode as arguments

+ file name: a string

+ mode: &#39;r&#39; for reading; &#39;w&#39; for writing

+ `open` returns a file object

+ after reading, the opened file should be closed

https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files

---

## Reading/writing file

+ The `read` method

  Reads the entire file, unless a `size` argument is provided

+ The `readline` method

  Reads one line from the file

+ The `readlines` method

  Reads all lines from the file into a list

+ The `write` method

  Accepts a string as argument, and writes the string to file

---

## Example from Back in the Day

Imagine researcher Miraculix has a student Kaningentix, who has called all his
datafiles with a suffix `.knx`.

Miraculix has to split out the herbs for Asterix and Obelix with suffix `.asx`
and `.obx`.

```
$ cat allherbs.knx
Creator of file: Kaningentix
First test
Herbs Celts
aster: herb1
obeli: herb2
aster: herb3
aster: herb4
obeli: herb5
```

---

## Example from Back in the Day

Imagine researcher Miraculix has a student Kaningentix, who has called all his
datafiles with a suffix `.knx`.

Miraculix has to split out the herbs for Asterix and Obelix with suffix `.asx`
and `.obx`.

```
$ cat allherbs.knx
Creator of file: Kaningentix
First test
Herbs Celts
aster: herb1
obeli: herb2
aster: herb3
aster: herb4
obeli: herb5
```

To read this file in Python, we need to open it first.

```python
f_inp = open(&#34;allherbs.knx&#34;, &#39;r&#39;)
```

&#39;r&#39; means that the file is opened in read-only mode.

---

## Example from Back in the Day

File are usually read line per line. Sometimes it is useful to know the total
number of the lines in the file.

```python
num_lines = 0
for line in f_inp:
    num_lines += 1
```

---

## Example from Back in the Day

File are usually read line per line. Sometimes it is useful to know the total
number of the lines in the file.

```python
num_lines = 0
for line in f_inp:
    num_lines += 1
```

Other ways of getting number of lines:

```python
f_inp.seek(0)
lines = list(f_inp)
num_lines = len(lines)
```

```python
f_inp.seek(0)
lines = f_inp.readlines()
num_lines = len(lines)
```

```python
f_inp.close()
```

Note that `inp.seek(0)` is used to make sure that we start over from the
beginning of the file.

---

## Example from Back in the Day

In most cases all the information can be retrieved by reading the file once.

```python
f_inp = open(&#34;allherbs.knx&#34;, &#39;r&#39;)

for line in f_inp:
    if &#34;aster:&#34; in line:
        print(line)
    elif &#34;obeli:&#34; in line:
        print(line)

f_inp.close()
```

---

## Example from Back in the Day

In most cases all the information can be retrieved by reading the file once.

```python
f_inp = open(&#34;allherbs.knx&#34;, &#39;r&#39;)

for line in f_inp:
    if &#34;aster:&#34; in line:
        print(line)
    elif &#34;obeli:&#34; in line:
        print(line)

f_inp.close()
```

&lt;pre&gt;
aster: herb1

obeli: herb2

aster: herb3

aster: herb4

obeli: herb5

&lt;/pre&gt;

---

## Example from Back in the Day

We can use lists to save the herbs that belong to Asterix or Obelix.

```python
herbs_asx = []
herbs_obx = []

f_inp = open(&#34;allherbs.knx&#34;, &#39;r&#39;)

for line in f_inp:
    if &#34;aster:&#34; in line:
        herb = line.split()[1]
        herbs_asx.append(herb)
    elif &#34;obeli:&#34; in line:
        herb = line.split()[1]
        herbs_obx.append(herb)

f_inp.close()

print(herbs_asx)
print(herbs_obx)
```

---

## Example from Back in the Day

We can use lists to save the herbs that belong to Asterix or Obelix.

```python
herbs_asx = []
herbs_obx = []

f_inp = open(&#34;allherbs.knx&#34;, &#39;r&#39;)

for line in f_inp:
    if &#34;aster:&#34; in line:
        herb = line.split()[1]
        herbs_asx.append(herb)
    elif &#34;obeli:&#34; in line:
        herb = line.split()[1]
        herbs_obx.append(herb)

f_inp.close()

print(herbs_asx)
print(herbs_obx)
```

&lt;pre&gt;
[&#39;herb1&#39;, &#39;herb3&#39;, &#39;herb4&#39;]
[&#39;herb2&#39;, &#39;herb5&#39;]
&lt;/pre&gt;

---

## Example from Back in the Day

If we want to save the herbs to file

```python
f_out_asx = open(&#34;allherbs.asx&#34;, &#39;w&#39;)
f_out_obx = open(&#34;allherbs.obx&#34;, &#39;w&#39;)

for herb in herbs_asx:
    f_out_asx.write(herb + &#39;\n&#39;)

for herb in herbs_obx:
    f_out_obx.write(herb + &#39;\n&#39;)

f_out_asx.close()
f_out_obx.close()
```

---

## Example from Back in the Day

If we want to save the herbs to file

```python
f_out_asx = open(&#34;allherbs.asx&#34;, &#39;w&#39;)
f_out_obx = open(&#34;allherbs.obx&#34;, &#39;w&#39;)

for herb in herbs_asx:
    f_out_asx.write(herb + &#39;\n&#39;)

for herb in herbs_obx:
    f_out_obx.write(herb + &#39;\n&#39;)

f_out_asx.close()
f_out_obx.close()
```

```
$ cat allherbs.asx
herb1
herb3
herb4
```

```
$ cat allherbs.obx
herb2
herb5
```

---

## Example from Back in the Day

If we do both reading and writing in one program

```python
f_inp = open(&#34;allherbs.knx&#34;, &#39;r&#39;)
f_out_asx = open(&#34;allherbs.asx&#34;, &#39;w&#39;)
f_out_obx = open(&#34;allherbs.obx&#34;, &#39;w&#39;)

for line in f_inp:

    if &#34;aster:&#34; in line:
        herb = line.split()[1]
        f_out_asx.write(herb + &#39;\n&#39;)

    elif &#34;obeli:&#34; in line:
        herb = line.split()[1]
        f_out_obx.write(herb + &#39;\n&#39;)

f_inp.close()
f_out_asx.close()
f_out_obx.close()
```
---

## Choice of input file

Imagine Kaningentix didn&#39;t have only the file allherbs.knx, but also alldiseases.knx and allforces.knx. Miraculix likes to have a program in which he can decide upon the file to be decomposed.

```
&gt;&gt;&gt; file_in = input(&#34;Which inputfile? &#34;)
Which inputfile?

```

Miraculix can write then `allherbs` to get the `allherbs.knx` file analyzed.

Remark: In `python3`, `input()` returns a string. When an integer or float number is expected as input, `int(input())` or `float(input())`, respectively, can be used. For an expression, `eval(input())` has to be reverted to.   

&lt;!--
Remark: In `python2`, `raw_input()` delivers a string, while `input()` considers the input as an expression. In `python3`, `raw_input()` does not exist and `input()` takes over the meaning of the old `raw_input()`. When therefore the input has to considered as an expression, `eval(input())` has to be used.  
--&gt;


---

## Choice of input file

Imagine now that Miraculix gives a name of a file which does not exist. The program breaks. Therefore, a test can be built in.

&lt;!--
file=raw_input(&#34;Which inputfile? &#34;)
inp= open(file_in+&#34;.knx&#34;,&#39;r&#39;)

Errormessage:
Which inputfile? somethingelse
Traceback (most recent call last):
  File &#34;program_space_endline_input&#34;, line 8, in &lt;module&gt;
    inp= open(file+&#34;.knx&#34;,&#39;r&#39;)
IOError: [Errno 2] No such file or directory: &#39;somethingelse.knx&#39;
--&gt;

```
&gt;&gt;&gt; try:
...   inp = open(file_in+&#34;.knx&#34;,&#39;r&#39;)
&gt;&gt;&gt; except IOError:
...   print(&#39;File cannot be opened:&#39;, file_in+&#34;.knx&#34;)
...   exit()

```

When a file is given in which does not exist, simply message is given out and the program terminates.

```
Which inputfile? somethingelse
File cannot be opened: somethingelse.knx

```

&lt;!--
class B(Exception):
    pass

class C(B):
    pass

class D(C):
    pass

for cls in [B, C, D]:
    try:
       raise cls()
    except D:
       print(&#34;D&#34;)
    except C:
       print(&#34;C&#34;)
    except B:
       print(&#34;B&#34;)
--&gt;


&lt;!--
Possible errors:
ValueError(&#39;Please enter a number&#39;-&#39;That was not an integer&#39;), RuntimeError(&#39;please indicate your choice with 1 or 2&#39; - &#39;that was not 1 or 2&#39;), TypeError(&#39;passing arguments of wrong type e.g. &#39;2&#39;+2 ), NameError(use a variable before it is created)
--&gt;

A fast look upon other errors:

```
&gt;&gt;&gt; try:
...    &lt;I would like to try to do something&gt;
&gt;&gt;&gt; except IOError:
...    print(&#34;This is something like &#39;cannot open&#39;&#34;)
&gt;&gt;&gt; except ValueError:
...    print(&#34;Could not convert data to an integer.&#34;)
&gt;&gt;&gt; except RuntimeError:
...    print(&#34;you had only choice between 1 and 2 - 3 is not possible&#34;)
&gt;&gt;&gt; except TypeError:
...    print(&#34;passing arguments of wrong type e.g. &#39;2&#39; + 2 &#34;)
&gt;&gt;&gt; except NameError:
...    print(&#34;use a variable before it is created&#34;)
&gt;&gt;&gt; except:
...    print(&#34;I have no idea which error&#34;)

```

---

## Common part in the name

The only part which is important is the one in front of the &#34;.&#34;. Remark that the name of the file is like an array and that only from element &#34;0&#34; until (but not including) the &#34;.&#34; is retained.   

```
&gt;&gt;&gt; if &#34;.&#34; in file_in:
...      file_in = file_in[:file_in.find(&#34;.&#34;)]
&gt;&gt;&gt; file_in
&#39;allherbs&#39;

```

Using libraries, this can be done nicer:

```
&gt;&gt;&gt; import os
&gt;&gt;&gt; file_in, file_extension= os.path.splitext(file_in)
&gt;&gt;&gt; file_in
&#39;allherbs&#39;
&gt;&gt;&gt; file_extension
&#39;.knx&#39;

```

---

## Reading until end of line

It makes not much sense to use the program above, since e.g. the herbs should have names which have all the exact same length. In the example of Miraculix, each line (and therefore the name of the herb) ends on another space or on a hard enter.

&lt;!--
     if (line[:5]) == &#34;aster&#34;:
            outas.write(line[7:]+&#34;\n&#34;)
     if (line[:5]) == &#34;obeli&#34;:
            outob.write(line[7:]+&#34;\n&#34;)
--&gt;

```
&gt;&gt;&gt;     if line[:5] == &#34;aster&#34;:
...           outas.write(line[7:])
&gt;&gt;&gt;     if line[:5] == &#34;obeli&#34;:
...           outob.write(line[7:])
	       
```

---

## Reading until space

In the program above, the name of the Celt is read based upon the number of characters - which meant that Asterix was abbreviated to `aster` and Obelix to `obeli`. It would have been better to read until the first space. 

```
&gt;&gt;&gt;     spacepos = line.find(&#39; &#39;)
&gt;&gt;&gt;     if line[:spacepos-1] == &#34;asterix&#34;:
...           outas.write(line[spacepos+1:])
&gt;&gt;&gt;     if line[:spacepos-1] == &#34;obelix&#34;:
...           outob.write(line[spacepos+1:])

```

---

## Example today

In this way, the input could be

```
$ cat allherbs_2.knx
Creator of file: Kaningentix
First test
Herbs Celts
asterix: petraoleum
obelix: kerosine
asterix: cyanine
asterix: diesel
obelix: lpg

```

... and Miraculix will get ...

```
$ cat allherbs_2.asx
petraoleum
cyanine
diesel

```

```
$ cat allherbs_2.obx
kerosine
lpg

```

---

## Some other type of printing

We know already

```
&gt;&gt;&gt; file_in = &#34;obelix_dog&#34;
&gt;&gt;&gt; inp = open(file_in, &#39;w&#39;)
&gt;&gt;&gt; inp.write(&#34;Idefix&#34;)
&gt;&gt;&gt; inp.close()

```

It is also possible to say

```
&gt;&gt;&gt; inp = open(file_in, &#39;w&#39;)
&gt;&gt;&gt; print(&#34;Idefix&#34;, file=inp)
&gt;&gt;&gt; inp.close()

```

---

## Some other type of printing

It should be known that `inp.write()` only works when a `string` is written out:

```
&gt;&gt;&gt; file_in = &#34;obelix_wporcs&#34;
&gt;&gt;&gt; inp = open(file_in, &#39;w&#39;)
&gt;&gt;&gt; number = 5
&gt;&gt;&gt; inp.write(str(number))
```

or

&lt;!--
&gt;&gt;&gt; inp.write(&#34;%d \n&#34; % number)
--&gt;


```
&gt;&gt;&gt; inp.write(&#34;%d \n&#34; % number)
```

Finally, the `open` function can have three options: read (&#39;r&#39;), write (&#39;w&#39;) - and append (&#39;a&#39;). In the latter case, the extra output is written at the end of the file.  

---

## How to read strings and numbers?

In a file, Asterix keeps tracks of his weapons:

```
$ cat weapons.asx
knife: 4
spear: 2
arrow: 3
fist: 2

```

The total sum of his weapons is given by `readlines()` followed by a `split()` of each line.

```
&gt;&gt;&gt; inp = open(&#34;weapons.asx&#34;, &#39;r&#39;)
&gt;&gt;&gt; lines = inp.readlines()
&gt;&gt;&gt; number = 0
&gt;&gt;&gt; for line in lines:
...     number = number + int(line.split()[1])
&gt;&gt;&gt; print(number)
11

```

`split()`, which standard separates parts of a line by a space, gives access to a list. Remark that `line.split()` gives access to a list of strings.

---

## Join

The opposite of `split()` is somehow `join()`: when `l` is a list of words, `&#34; &#34;.join(l)` gives a a sentence in which the words are separated by spaces.   

&lt;!--
&#39; &#39;.join(l) is only possible for strings!
--&gt;

```
&gt;&gt;&gt; fourlist=[5, 56, 24, 22]
&gt;&gt;&gt; str_of_numbers=&#39; &#39;.join(str(x) for x in fourlist)
&gt;&gt;&gt; print(str_of_numbers)
5 56 24 22

```

---

## The sys-module and some easy way of input

`argv` contains the vector of arguments passed to a program via the command line. `argv[0]` is the filename of the program, `argv[1]` is then the first argument given, `argv[2]` the second etc. `argv` has to be imported from the module `sys`.

Imagine that a program `program_test.py` contains two lines of code:

```
from sys import argv
print(argv)
```

The output of `python program_test.py` is then

```
[&#39;program_test.py&#39;, &#39;a&#39;, &#39;b&#39;]
```

argv[0] contains then the name `program_test.py`, argv[1] and argv[2] contain `a` and `b`, respectively.

---

## The sys-module and some safe way of input

Miraculix made a program `healthy_herb.py` which says whether or not a herb is safe to be eaten or not. As input parameters, the program needs to know the color of the herb as well as its sites in the forest:

`python healthy_herb.py green river`

To make sure that his collaborators provide these from the beginning, Miraculix hard coded a small test:       

```
from sys import argv
if len(argv) != 3 :
   print (&#34;Usage: python healthy_herb.py color place&#34;)
   exit()

```

Of course, in the code, the arguments still have to be defined:

```
color = argv[1]
place = argv[2]

```

---

## References

&#34;Python for Data Analysis&#34;, Wes McKinney, O&#39;Reilly Media, Sebastopol, CA: 2013

&#34;Python for Informatics&#34;, Charles Severance, 2013, http://www.pythonlearn.com/book.php#python-for-informatics

http://www.pythonforbeginners.com

    </textarea>

    <script src="/file_handling/refreeze/js/remark-latest.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      var hljs = remark.highlighter.engine;
    </script>
    <script src="/file_handling/refreeze/js/high.js" type="text/javascript"></script>
    <script type="text/javascript">
      var slideshow = remark.create({
          highlightStyle: 'sunburst',
          highlightLanguage: 'remark'
        }) ;
    </script>
  </body>
</html>